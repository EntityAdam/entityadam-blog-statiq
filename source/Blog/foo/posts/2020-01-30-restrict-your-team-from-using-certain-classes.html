<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>My Blog - Restrict the use of certain Attributes</title>

  <link rel="canonical" href='/posts/2020-01-30-restrict-your-team-from-using-certain-classes'>

      <link type="application/rss+xml" rel="alternate" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" href="/feed.atom" />

  <meta name="application-name" content='My Blog' />
  <meta name="msapplication-tooltip" content='My Blog' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='My Blog - Restrict the use of certain Attributes' />
    <meta property="og:image" content='/posts/img/adam-avatar-final-trans-400.png' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/2020-01-30-restrict-your-team-from-using-certain-classes' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>My Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead" style="background-image: url(&quot;/posts/img/adam-avatar-final-trans-400.png&quot;)">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Restrict the use of certain Attributes
          </h1>
            <div class="meta">Published on Thursday, January 30, 2020</div>
              <div class="mt-3">
                  <a href="/tags/c" class="badge text-bg-light"> C#</a>
                  <a href="/tags/net" class="badge text-bg-light"> .NET</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <p>This is one of those 'take it or leave it' answers to an interesting question,&quot;How to restrict the use of certain Attributes?&quot;</p>
<h1 id="an-interesting-question">An interesting question</h1>
<p>A developer asked the following question:</p>
<blockquote>
<p>Anyone know of a mechanism to enforce that certain Annotations are not used?
Iâ€™m building my EF core code-first model and would like to enforce that <code>[DatabaseGenerated]</code> is not used in the model.</p>
</blockquote>
<p>With a little bit of duck duck luck, I found something relevant on StackOverFlow and adapted it to their purpose, and added some access modifiers.</p>
<p>This is what I came up with.</p>
<pre><code class="language-cs">[Obsolete(&quot;Do not use!&quot;, true)]
internal sealed class DatabaseGeneratedAttribute : System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute
{
    public DatabaseGeneratedAttribute(DatabaseGeneratedOption databaseGeneratedOption) : base(databaseGeneratedOption)
    {
    }
}
</code></pre>
<p>So, we're basically deriving our own class from the class we want to restrict other developers from using.</p>
<ul>
<li>It's tagged with the <code>ObsoleteAttribute</code> so it causes a compiler build error.</li>
<li>It's <code>internal</code> so it should be contained to this single assembly where it's being used.</li>
<li>It's marked as <code>sealed</code> so it can't be further sub-classed.</li>
<li>It has no implementation, so hopefully it's clear that it's not to be used.</li>
</ul>
<h1 id="thoughts">Thoughts</h1>
<p>It was good enough for the developer who asked, but since this code is 'clever', I'm reluctant to recommend it.  However it was an interesting question and it is way easier than writing a Roslyn Analyzer.</p>
<p>It's interesting because If you're part of a team and hopefully have agreed on some design practice, how can you keep you and your team 'honest' and not allow certain things that your team has agreed on?</p>
<p>This is probably a decent use-case, because Entity Framework Core (EF Core) models certainly do have a habit of becoming littered with <code>DataAnnotations</code>. And IMO, usually unnecessarily if you have it in your power to stick with the <a href="https://www.learnentityframeworkcore.com/conventions">EF Core conventions</a>.</p>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2023</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
